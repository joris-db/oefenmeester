<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Myrthe's Oefenmeester</title>

    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/joris-db/oefenmeester/refs/heads/main/icon.png">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/joris-db/oefenmeester/refs/heads/main/icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Oefenmeester">
    <meta name="mobile-web-app-capable" content="yes">

    <link rel="manifest" href='data:application/manifest+json,{"name":"Myrthes Oefenmeester","short_name":"Oefenmeester","start_url":".","display":"standalone","background_color":"#020617","theme_color":"#020617","icons":[{"src":"https://raw.githubusercontent.com/joris-db/oefenmeester/refs/heads/main/icon.png","sizes":"512x512","type":"image/png"}]}'>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        :root { --slate-950: #020617; --slate-900: #0f172a; }
        body { 
            background-color: var(--slate-950); 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            margin: 0; height: 100vh; height: -webkit-fill-available; overflow: hidden;
            -webkit-tap-highlight-color: transparent; user-select: none; color: white;
        }
        .app-container { height: 100vh; height: -webkit-fill-available; display: flex; flex-direction: column; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
        .numpad-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .scroll-hide::-webkit-scrollbar { display: none; }
        
        /* Optimalisatie voor vlaggen op verzoek: Volledig rechthoekig en passend */
        .flag-card {
            aspect-ratio: 3 / 2;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-radius: 0; /* Geen afgeronde hoeken */
            background: #1e293b;
            padding: 4px; /* Kleine padding zodat de vlag de rand niet raakt als hij 'contained' is */
        }
        .flag-img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Zorgt dat de volledige vlag zichtbaar is zonder bijsnijden */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        const germanLidlWords = [
            { nl: "De vergadering", de: "Besprechung" }, { nl: "De afspraak", de: "Termin" }, { nl: "De collega", de: "Kollege" }, { nl: "De afdeling", de: "Abteilung" },
            { nl: "Het kantoor", de: "BÃ¼ro" }, { nl: "De e-mail", de: "E-Mail" }, { nl: "De bijlage", de: "Anhang" }, { nl: "Het verslag", de: "Protokoll" },
            { nl: "De deadline", de: "Frist" }, { nl: "De opdracht", de: "Auftrag" }, { nl: "De planning", de: "Planung" }, { nl: "De strategie", de: "Strategie" },
            { nl: "De doelstelling", de: "Zielsetzung" }, { nl: "Het project", de: "Projekt" }, { nl: "De feedback", de: "RÃ¼ckmeldung" }, { nl: "De presentatie", de: "PrÃ¤sentation" },
            { nl: "De inkoop", de: "Einkauf" }, { nl: "De leverancier", de: "Lieferant" }, { nl: "De onderhandeling", de: "Verhandlung" }, { nl: "De prijs", de: "Preis" },
            { nl: "De korting", de: "Rabatt" }, { nl: "Het contract", de: "Vertrag" }, { nl: "De kwaliteit", de: "QualitÃ¤t" }, { nl: "Het monster (product)", de: "Muster" },
            { nl: "De verpakking", de: "Verpackung" }, { nl: "Het assortiment", de: "Sortiment" }, { nl: "De houdbaarheid", de: "Haltbarkeit" }, { nl: "De voorraad", de: "Lagerbestand" },
            { nl: "De bestelling", de: "Bestellung" }, { nl: "De levering", de: "Lieferung" }, { nl: "De vrachtbrief", de: "Frachtbrief" }, { nl: "De douane", de: "Zoll" },
            { nl: "De logistiek", de: "Logistik" }, { nl: "Het distributiecentrum", de: "Zentrallager" }, { nl: "De transportketen", de: "Lieferkette" }, { nl: "De vrachtwagen", de: "LKW" },
            { nl: "De verzending", de: "Versand" }, { nl: "De opslag", de: "Lagerung" }, { nl: "Het magazijn", de: "Lager" }, { nl: "De pallet", de: "Palette" },
            { nl: "De inventarisatie", de: "Inventur" }, { nl: "De routeplanning", de: "Tourenplanung" }, { nl: "De vertraging", de: "VerzÃ¶gerung" }, { nl: "De capaciteit", de: "KapazitÃ¤t" },
            { nl: "De boekhouding", de: "Buchhaltung" }, { nl: "De factuur", de: "Rechnung" }, { nl: "De betaling", de: "Zahlung" }, { nl: "De winst", de: "Gewinn" },
            { nl: "Het verlies", de: "Verlust" }, { nl: "De omzet", de: "Umsatz" }, { nl: "De begroting", de: "Budget" }, { nl: "De belastingen", de: "Steuern" },
            { nl: "Het bankrekeningnummer", de: "Kontonummer" }, { nl: "De onkosten", de: "Ausgaben" }, { nl: "De analyse", de: "Analyse" }, { nl: "Het rapport", de: "Bericht" },
            { nl: "De software", de: "Software" }, { nl: "De hardware", de: "Hardware" }, { nl: "De database", de: "Datenbank" }, { nl: "Het wachtwoord", de: "Passwort" },
            { nl: "De verbinding", de: "Verbindung" }, { nl: "De systeembeheerder", de: "Systemadministrator" }, { nl: "De update", de: "Aktualisierung" }, { nl: "De storing", de: "StÃ¶rung" },
            { nl: "De laptop", de: "Laptop" }, { nl: "Het scherm", de: "Bildschirm" }, { nl: "De muis", de: "Maus" }, { nl: "Het toetsenbord", de: "Tastatur" },
            { nl: "De sollicitatie", de: "Bewerbung" }, { nl: "Het interview", de: "VorstellungsgesprÃ¤ch" }, { nl: "De werknemer", de: "Arbeitnehmer" }, { nl: "De werkgever", de: "Arbeitgeber" },
            { nl: "Het salaris", de: "Gehalt" }, { nl: "De vakantie", de: "Urlaub" }, { nl: "De ziekte", de: "Krankheit" }, { nl: "De opleiding", de: "Fortbildung" },
            { nl: "De overwerkuren", de: "Ãœberstunden" }, { nl: "De ontslagname", de: "KÃ¼ndigung" }, { nl: "Het team", de: "Team" }, { nl: "De motivatie", de: "Motivation" },
            { nl: "De reclame", de: "Werbung" }, { nl: "De folder", de: "Prospekt" }, { nl: "De klant", de: "Kunde" }, { nl: "De doelgroep", de: "Zielgruppe" },
            { nl: "De concurrentie", de: "Wettbewerb" }, { nl: "Het merk", de: "Marke" }, { nl: "De campagne", de: "Kampagne" }, { nl: "De website", de: "Webseite" },
            { nl: "De social media", de: "Soziale Medien" }, { nl: "De nieuwsbrief", de: "Newsletter" }, { nl: "Het logo", de: "Logo" }, { nl: "Het imago", de: "Image" },
            { nl: "De locatie", de: "Standort" }, { nl: "De huur", de: "Miete" }, { nl: "De bouw", de: "Bau" }, { nl: "De vergunning", de: "Genehmigung" },
            { nl: "De renovatie", de: "Renovierung" }, { nl: "Het terrein", de: "GelÃ¤nde" }, { nl: "De architect", de: "Architekt" }, { nl: "De parkeerplaats", de: "Parkplatz" },
            { nl: "Het bureau", de: "Schreibtisch" }, { nl: "De stoel", de: "Stuhl" }, { nl: "De koffie", de: "Kaffee" }, { nl: "De lunchpauze", de: "Mittagspause" },
            { nl: "De telefoon", de: "Telefon" }, { nl: "De printer", de: "Drucker" }, { nl: "Het papier", de: "Papier" }, { nl: "De map", de: "Ordner" },
            { nl: "De pen", de: "Stift" }, { nl: "Het notitieblok", de: "Notizblock" }, { nl: "De agenda", de: "Kalender" }, { nl: "De klok", de: "Uhr" },
            { nl: "De lift", de: "Aufzug" }, { nl: "De trap", de: "Treppe" }, { nl: "De gang", de: "Flur" }, { nl: "De ingang", de: "Eingang" },
            { nl: "De uitgang", de: "Ausgang" }, { nl: "De vergaderruimte", de: "Besprechungsraum" }, { nl: "De receptie", de: "Empfang" }, { nl: "De sleutel", de: "SchlÃ¼ssel" },
            { nl: "De pas", de: "Ausweis" }, { nl: "De manager", de: "Leiter" }, { nl: "De chef", de: "Vorgesetzter" }, { nl: "De assistent", de: "Assistent" },
            { nl: "De stagiair", de: "Praktikant" }, { nl: "De samenwerking", de: "Zusammenarbeit" }, { nl: "Het success", de: "Erfolg" }, { nl: "Het probleem", de: "Problem" },
            { nl: "De oplossing", de: "LÃ¶sung" }, { nl: "De vraag", de: "Frage" }, { nl: "Het antwoord", de: "Antwort" }, { nl: "De discussie", de: "Diskussion" },
            { nl: "De beslissing", de: "Entscheidung" }, { nl: "De verandering", de: "VerÃ¤nderung" }, { nl: "De verbetering", de: "Verbesserung" }, { nl: "De controle", de: "Kontrolle" },
            { nl: "De taak", de: "Aufgabe" }, { nl: "De verantwoordelijkheid", de: "Verantwortung" }, { nl: "De ervaring", de: "Erfahrung" }, { nl: "De kennis", de: "Wissen" },
            { nl: "De vaardigheid", de: "FÃ¤higkeit" }, { nl: "Het proces", de: "Prozess" }, { nl: "De structuur", de: "Struktur" }, { nl: "De efficiÃ«ntie", de: "Effizienz" },
            { nl: "De documentatie", de: "Dokumentation" }, { nl: "Het bestand", de: "Datei" }, { nl: "De map (digitaal)", de: "Verzeichnis" }, { nl: "De cloud", de: "Cloud" },
            { nl: "De backup", de: "Sicherung" }, { nl: "De browser", de: "Browser" }, { nl: "De link", de: "Link" }, { nl: "De download", de: "Download" },
            { nl: "De upload", de: "Upload" }, { nl: "De installatie", de: "Installation" }, { nl: "De configuratie", de: "Konfiguration" }, { nl: "De interface", de: "Schnittstelle" },
            { nl: "De gebruiker", de: "Benutzer" }, { nl: "De admin", de: "Administrator" }, { nl: "De veiligheid", de: "Sicherheit" }, { nl: "De privacy", de: "Datenschutz" },
            { nl: "De wet", de: "Gesetz" }, { nl: "De regel", de: "Regel" }, { nl: "De richtlijn", de: "Richtlinie" }, { nl: "De standaard", de: "Standard" },
            { nl: "Het risico", de: "Risiko" }, { nl: "De verzekering", de: "Versicherung" }, { nl: "De belastingsdienst", de: "Finanzamt" }, { nl: "De douanecontrole", de: "Zollkontrolle" },
            { nl: "De import", de: "Import" }, { nl: "De export", de: "Export" }, { nl: "De wereldhandel", de: "Welthandel" }, { nl: "De markt", de: "Market" },
            { nl: "De vraag (economisch)", de: "Nachfrage" }, { nl: "Het aanbod", de: "Angebot" }, { nl: "De consument", de: "Verbraucher" }, { nl: "De trend", de: "Trend" },
            { nl: "De innovatie", de: "Innovation" }, { nl: "De duurzaamheid", de: "Nachhaltigkeit" }, { nl: "Het milieu", de: "Umwelt" }, { nl: "De energie", de: "Energie" },
            { nl: "De kostenreductie", de: "Kostensenkung" }, { nl: "De optimalisatie", de: "Optimierung" }, { nl: "De productiviteit", de: "ProduktivitÃ¤t" }, { nl: "De groei", de: "Wachstum" },
            { nl: "De investering", de: "Investition" }, { nl: "Het kapitaal", de: "Kapital" }, { nl: "De aandeelhouder", de: "AktionÃ¤r" }, { nl: "De jaarcijfers", de: "Jahresabschluss" },
            { nl: "De audit", de: "PrÃ¼fung" }, { nl: "De compliance", de: "Einhaltung" }, { nl: "De ethiek", de: "Ethik" }, { nl: "De cultuur", de: "Kultur" },
            { nl: "De visie", de: "Vision" }, { nl: "De missie", de: "Mission" }, { nl: "De kernwaarde", de: "Kernwert" }, { nl: "De samenleving", de: "Gesellschaft" },
            { nl: "De globalisering", de: "Globalisierung" }, { nl: "De digitalisering", de: "Digitalisierung" }, { nl: "De automatisering", de: "Automatisierung" }, { nl: "De robotica", de: "Robotik" },
            { nl: "De data-analyse", de: "Datenanalyse" }, { nl: "De statistiek", de: "Statistik" }, { nl: "De grafiek", de: "Grafik" }, { nl: "De tabel", de: "Tabelle" },
            { nl: "De berekening", de: "Berechnung" }, { nl: "De schatting", de: "SchÃ¤tzung" }, { nl: "Het budgetplan", de: "Haushaltsplan" }, { nl: "De prognose", de: "Prognose" },
            { nl: "De herstructurering", de: "Umstrukturierung" }, { nl: "De fusie", de: "Fusion" }, { nl: "De overname", de: "Ãœbernahme" }, { nl: "De partner", de: "Partner" },
            { nl: "Het netwerk", de: "Netzwerk" }, { nl: "De connectie", de: "Verbindung" }, { nl: "De dialoog", de: "Dialog" }, { nl: "Het overleg", de: "Beratung" },
            { nl: "De workshop", de: "Workshop" }, { nl: "De training", de: "Training" }, { nl: "De coaching", de: "Coaching" }, { nl: "De mentor", de: "Mentor" },
            { nl: "De opvolger", de: "Nachfolger" }, { nl: "De pensioenleeftijd", de: "Rentenalter" }, { nl: "De bonus", de: "Bonus" }, { nl: "De promotie", de: "BefÃ¶rderung" },
            { nl: "De carriere", de: "Karriere" }, { nl: "De werk-privÃ© balans", de: "Work-Life-Balance" }, { nl: "Het thuiskantoor", de: "Homeoffice" }, { nl: "De werktijd", de: "Arbeitzeit" },
            { nl: "De deeltijdbaan", de: "Teilzeitjob" }, { nl: "De voltijdbaan", de: "Vollzeitjob" }, { nl: "De flexibiliteit", de: "FlexibilitÃ¤t" }, { nl: "De betrouwbaarheid", de: "ZuverlÃ¤ssigkeit" },
            { nl: "De integriteit", de: "IntegritÃ¤t" }, { nl: "De loyaliteit", de: "LoyalitÃ¤t" }, { nl: "De ambitie", de: "Ehrgeiz" }, { nl: "De passie", de: "Leidenschaft" }
        ];

        const Icon = ({ name, size = 24 }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide && iconRef.current) {
                    iconRef.current.innerHTML = '';
                    const iconElement = document.createElement('i');
                    iconElement.setAttribute('data-lucide', name);
                    iconElement.style.width = `${size}px`;
                    iconElement.style.height = `${size}px`;
                    iconRef.current.appendChild(iconElement);
                    window.lucide.createIcons({ attrs: { strokeWidth: 2, width: size, height: size } });
                }
            }, [name, size]);
            return <span ref={iconRef} className="inline-flex items-center justify-center" />;
        };

        const App = () => {
            const [view, setView] = useState('menu');
            const [score, setScore] = useState(() => Number(localStorage.getItem('myrthe_score')) || 0);
            const [mathLevel, setMathLevel] = useState(() => Number(localStorage.getItem('myrthe_level')) || 1);
            const [mathStreak, setMathStreak] = useState(0);
            const [selectedTypes, setSelectedTypes] = useState({ plus: true, min: true, keer: false, gedeeld: false });
            const [mathProblem, setMathProblem] = useState({ q: '', a: 0 });
            const [userAnswer, setUserAnswer] = useState('');
            const [feedback, setFeedback] = useState(null);
            const [currentProblem, setCurrentProblem] = useState(null);
            const [countries, setCountries] = useState([]);

            useEffect(() => { 
                localStorage.setItem('myrthe_score', score); 
                localStorage.setItem('myrthe_level', mathLevel); 
            }, [score, mathLevel]);

            useEffect(() => {
                fetch('https://restcountries.com/v3.1/all?fields=name,flags,translations')
                    .then(r => r.json())
                    .then(data => {
                        const formatted = data.map(c => ({
                            name: c.translations.nld?.common || c.name.common,
                            flag: c.flags.svg
                        })).filter(c => c.name && c.flag);
                        setCountries(formatted);
                    });
            }, []);

            const generateMath = useCallback(() => {
                const ops = Object.keys(selectedTypes).filter(k => selectedTypes[k]);
                const type = ops.length > 0 ? ops[Math.floor(Math.random() * ops.length)] : 'plus';
                let n1, n2, q, a;
                const minVal = Math.max(2, Math.floor(mathLevel / 2));
                switch(type) {
                    case 'plus': n1 = Math.floor(Math.random() * (mathLevel * 15)) + minVal; n2 = Math.floor(Math.random() * (mathLevel * 15)) + minVal; q = `${n1} + ${n2}`; a = n1 + n2; break;
                    case 'min': n1 = Math.floor(Math.random() * (mathLevel * 15)) + (minVal * 2); n2 = Math.floor(Math.random() * (n1 - minVal)) + minVal; q = `${n1} - ${n2}`; a = n1 - n2; break;
                    case 'keer': n1 = Math.floor(Math.random() * 10) + 1; n2 = Math.floor(Math.random() * 10) + 1; q = `${n1} Ã— ${n2}`; a = n1 * n2; break;
                    case 'gedeeld': n2 = Math.floor(Math.random() * 9) + 2; a = Math.floor(Math.random() * 10) + 1; n1 = n2 * a; q = `${n1} : ${n2}`; break;
                }
                setMathProblem({ q, a });
                setUserAnswer('');
                setFeedback(null);
                setView('math-game');
            }, [selectedTypes, mathLevel]);

            const generateGerman = () => {
                const correct = germanLidlWords[Math.floor(Math.random() * germanLidlWords.length)];
                let opts = [correct.de];
                while(opts.length < 4) {
                    const r = germanLidlWords[Math.floor(Math.random() * germanLidlWords.length)].de;
                    if(!opts.includes(r)) opts.push(r);
                }
                setCurrentProblem({ ...correct, opts: opts.sort(() => Math.random() - 0.5), category: 'german' });
                setFeedback(null);
                setView('german-game');
            };

            const generateFlagProblem = () => {
                if (!countries.length) return;
                const correct = countries[Math.floor(Math.random() * countries.length)];
                let opts = [correct];
                while(opts.length < 4) {
                    const r = countries[Math.floor(Math.random() * countries.length)];
                    if(!opts.find(o => o.name === r.name)) opts.push(r);
                }
                setCurrentProblem({ ...correct, opts: opts.sort(() => Math.random() - 0.5), category: 'flags' });
                setFeedback(null);
                setView('flags-game');
            };

            const handleAnswer = (ans) => {
                if (feedback) return;

                let isCorrect = false;
                
                if (currentProblem.category === 'german') {
                    isCorrect = currentProblem.de === ans;
                } else if (currentProblem.category === 'flags') {
                    isCorrect = currentProblem.name === ans.name;
                }

                if (isCorrect) {
                    setScore(s => s + 5);
                    setFeedback({ type: 'success', text: 'Heel goed! ðŸŒŸ' });
                    setTimeout(() => {
                        if (currentProblem.category === 'german') generateGerman();
                        if (currentProblem.category === 'flags') generateFlagProblem();
                    }, 800);
                } else {
                    const failText = currentProblem.category === 'flags' 
                        ? `Helaas, dit was ${ans.name}` 
                        : `Helaas, dit was ${ans}`;
                    setFeedback({ type: 'error', text: failText });
                    setTimeout(() => setFeedback(null), 2500);
                }
            };

            const Header = ({ title, onBack, showLevel = false }) => (
                <div className="pt-12 pb-4 px-6 flex justify-between items-center bg-slate-900/80 backdrop-blur-md border-b border-white/5 sticky top-0 z-50">
                    <button onClick={onBack} className="text-slate-400 p-2 -ml-2"><Icon name="chevron-left" size={28} /></button>
                    <div className="flex flex-col items-center">
                        <h2 className="text-[10px] font-black uppercase tracking-[0.2em] italic text-slate-500">{title}</h2>
                        {showLevel && <span className="text-[10px] font-bold text-indigo-400">Level {mathLevel}</span>}
                    </div>
                    <div className="flex items-center gap-1.5 bg-orange-500/10 text-orange-500 px-3 py-1 rounded-full border border-orange-500/20">
                        <Icon name="trophy" size={14} /><span className="text-xs font-black">{score}</span>
                    </div>
                </div>
            );

            if (view === 'menu') {
                return (
                    <div className="app-container flex flex-col items-center justify-center p-6 text-center">
                        <h1 className="text-4xl font-black italic uppercase mb-8 tracking-tighter leading-tight">Myrthe's<br/>Oefenmeester</h1>
                        <div className="grid grid-cols-1 gap-4 w-full max-w-sm">
                            <button onClick={() => setView('math-setup')} className="glass p-5 rounded-3xl flex items-center gap-4 active:scale-95 transition-all">
                                <div className="bg-indigo-600 p-4 rounded-2xl shadow-lg flex-shrink-0"><Icon name="calculator" /></div>
                                <div className="text-left overflow-hidden">
                                    <span className="block text-lg font-bold">Rekenen</span>
                                    <span className="text-[10px] uppercase text-slate-400 block truncate">Plus, min, keer & gedeeld</span>
                                </div>
                            </button>
                            <button onClick={generateGerman} className="glass p-5 rounded-3xl flex items-center gap-4 active:scale-95 transition-all">
                                <div className="bg-rose-600 p-4 rounded-2xl shadow-lg flex-shrink-0"><Icon name="briefcase" /></div>
                                <div className="text-left overflow-hidden">
                                    <span className="block text-lg font-bold">Lidl Duits (Kantoor)</span>
                                    <span className="text-[10px] uppercase text-slate-400 block truncate">200+ woorden kantoorwerk</span>
                                </div>
                            </button>
                            <button onClick={generateFlagProblem} className="glass p-5 rounded-3xl flex items-center gap-4 active:scale-95 transition-all">
                                <div className="bg-emerald-600 p-4 rounded-2xl shadow-lg flex-shrink-0"><Icon name="flag" /></div>
                                <div className="text-left overflow-hidden">
                                    <span className="block text-lg font-bold">Vlaggen</span>
                                    <span className="text-[10px] uppercase text-slate-400 block truncate">Landen van de wereld</span>
                                </div>
                            </button>
                        </div>
                    </div>
                );
            }

            if (view === 'math-setup') {
                return (
                    <div className="app-container">
                        <Header title="Instellingen" onBack={() => setView('menu')} />
                        <div className="p-8 flex flex-col gap-4">
                            <h3 className="text-xl font-black italic uppercase">Kies je sommen:</h3>
                            <div className="grid grid-cols-2 gap-4">
                                {['plus', 'min', 'keer', 'gedeeld'].map(t => (
                                    <button key={t} onClick={() => setSelectedTypes(p => ({...p, [t]: !p[t]}))} className={`p-6 rounded-3xl border-2 transition-all font-black uppercase text-[10px] ${selectedTypes[t] ? 'bg-indigo-600 border-indigo-400' : 'bg-slate-900 border-transparent opacity-40'}`}>
                                        {t}
                                    </button>
                                ))}
                            </div>
                            <button onClick={generateMath} className="mt-4 w-full bg-white text-slate-950 py-5 rounded-3xl font-black text-xl italic uppercase">Start! ðŸš€</button>
                        </div>
                    </div>
                );
            }

            if (view === 'math-game') {
                return (
                    <div className="app-container">
                        <Header title="Rekenen" showLevel={true} onBack={() => setView('menu')} />
                        <div className="flex-1 flex flex-col items-center justify-center p-6">
                            <div className="flex gap-2 mb-4">
                                {[...Array(5)].map((_, i) => (
                                    <div key={i} className={`w-3 h-3 rounded-full ${i < mathStreak ? 'bg-indigo-400 shadow-lg' : 'bg-slate-800'}`} />
                                ))}
                            </div>
                            <div className="text-5xl font-black mb-6">{mathProblem.q}</div>
                            <div className="text-5xl font-mono bg-slate-900 w-full max-w-[200px] py-4 rounded-3xl border-2 border-slate-800 flex items-center justify-center text-indigo-400">
                                {userAnswer || "?"}
                            </div>
                            <div className="h-10 mt-4 text-sm font-black uppercase text-center px-4">
                                {feedback && <div className={feedback.type === 'success' ? 'text-emerald-400' : 'text-rose-400'}>{feedback.text}</div>}
                            </div>
                        </div>
                        <div className="bg-slate-900/90 p-6 pb-10 rounded-t-[2.5rem]">
                            <div className="numpad-grid max-w-xs mx-auto">
                                {[1,2,3,4,5,6,7,8,9,'C',0,'OK'].map(b => (
                                    <button key={b} onClick={() => {
                                        if(b === 'OK') {
                                            if(parseInt(userAnswer) === mathProblem.a) {
                                                const ns = mathStreak + 1;
                                                setScore(s => s + 2);
                                                if(ns >= 5) { setMathLevel(l => l + 1); setMathStreak(0); setFeedback({type:'success', text:'LEVEL UP!'}); }
                                                else { setMathStreak(ns); setFeedback({type:'success', text:'Lekker!'}); }
                                                setTimeout(generateMath, 800);
                                            } else {
                                                setFeedback({type:'error', text:`Fout! Het was ${mathProblem.a}`});
                                                setMathStreak(0);
                                                setTimeout(() => {setFeedback(null); setUserAnswer('');}, 1500);
                                            }
                                        } else if(b === 'C') setUserAnswer('');
                                        else if(userAnswer.length < 5) setUserAnswer(userAnswer + b);
                                    }} className="h-14 rounded-2xl bg-white/5 font-black text-xl">
                                        {b}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'german-game') {
                return (
                    <div className="app-container">
                        <Header title="Lidl Duits" onBack={() => setView('menu')} />
                        <div className="flex-1 flex flex-col p-8 items-center justify-center gap-8 text-center scroll-hide overflow-y-auto">
                            <div className="flex flex-col gap-2">
                                <span className="text-slate-500 uppercase text-[10px] font-black tracking-widest">Wat is het Duitse woord voor:</span>
                                <h2 className="text-3xl font-black italic">{currentProblem.nl}</h2>
                            </div>
                            <div className="grid grid-cols-1 gap-3 w-full max-w-sm">
                                {currentProblem.opts.map((o, i) => (
                                    <button key={i} onClick={() => handleAnswer(o)} className="glass p-5 rounded-2xl font-bold text-base active:bg-rose-600/20 active:border-rose-500 transition-all">
                                        {o}
                                    </button>
                                ))}
                            </div>
                            <div className="h-10 text-sm font-black uppercase">
                                {feedback && <div className={feedback.type === 'success' ? 'text-emerald-400' : 'text-rose-400'}>{feedback.text}</div>}
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'flags-game') {
                return (
                    <div className="app-container">
                        <Header title="Vlaggen Quiz" onBack={() => setView('menu')} />
                        <div className="flex-1 flex flex-col p-6 items-center justify-start gap-4 text-center overflow-y-auto pt-10">
                            <div className="flex flex-col gap-1 mb-2">
                                <span className="text-slate-500 uppercase text-[10px] font-black tracking-widest italic">Welke vlag hoort bij:</span>
                                <h2 className="text-3xl font-black italic uppercase tracking-tighter text-emerald-400 leading-tight">{currentProblem.name}</h2>
                            </div>
                            
                            <div className="grid grid-cols-2 gap-3 w-full max-w-xs mx-auto">
                                {currentProblem.opts.map((o, i) => (
                                    <button key={i} onClick={() => handleAnswer(o)} className="flag-card glass border-2 border-slate-700 active:border-emerald-500 transition-all">
                                        <img src={o.flag} className="flag-img" alt="Vlag" />
                                    </button>
                                ))}
                            </div>

                            <div className="min-h-[3rem] w-full flex items-center justify-center px-4 mt-2">
                                {feedback && (
                                    <div className={`text-[11px] font-black uppercase px-5 py-2.5 rounded-2xl shadow-xl ${feedback.type === 'success' ? 'bg-emerald-500 text-white' : 'bg-rose-500 text-white'}`}>
                                        {feedback.text}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>